<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V1.6.1 å‰ç«¯åŠŸèƒ½æµ‹è¯•</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 2rem 0;
        }
        
        .test-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin: 0 auto;
            max-width: 1000px;
            padding: 2rem;
        }
        
        .test-section {
            margin-bottom: 3rem;
            padding: 1.5rem;
            border: 2px solid #e9ecef;
            border-radius: 15px;
        }
        
        .test-section.success {
            border-color: #28a745;
            background-color: #f8fff9;
        }
        
        .test-section.warning {
            border-color: #ffc107;
            background-color: #fffdf5;
        }
        
        .test-section.error {
            border-color: #dc3545;
            background-color: #fff5f5;
        }
        
        .test-title {
            color: #495057;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }
        
        .test-result {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            margin: 0.5rem 0;
            font-weight: 500;
        }
        
        .test-result.pass {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .test-result.fail {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .form-control, .form-select {
            border-radius: 10px;
            border: 2px solid #e9ecef;
            padding: 0.75rem 1rem;
            margin-bottom: 1rem;
        }
        
        .form-control:disabled {
            background-color: #f8f9fa;
            opacity: 0.6;
        }
        
        .sortable-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            cursor: move;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
            user-select: none;
        }
        
        .disabled-sorting .sortable-item {
            opacity: 0.6;
            cursor: not-allowed;
            pointer-events: none;
        }
        
        .disabled-sorting .drag-handle {
            color: #ccc !important;
        }
        
        .drag-handle {
            color: #6c757d;
            margin-right: 0.5rem;
            font-size: 1.1rem;
        }
        
        .btn-test {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 25px;
            padding: 0.75rem 2rem;
            color: white;
            font-weight: 600;
            margin: 0.5rem;
        }
        
        .btn-test:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="test-container">
            <div class="text-center mb-4">
                <h1><i class="fas fa-flask me-3"></i>æ™ºèƒ½ç•™å­¦é€‰æ ¡è§„åˆ’ç³»ç»Ÿ V1.6.1 å‰ç«¯åŠŸèƒ½æµ‹è¯•</h1>
                <p class="text-muted">æµ‹è¯•æ–°å¢çš„ä¸“ä¸šæ’åã€æ ‡åŒ–æˆç»©äº¤äº’ã€é€‰æ ¡åå¥½æ’åºå’Œé¢„ç®—å­—æ®µåŠŸèƒ½</p>
            </div>
            
            <!-- æµ‹è¯•1: ä¸“ä¸šæ’åå­—æ®µ -->
            <div class="test-section" id="test1">
                <h3 class="test-title">
                    <i class="fas fa-trophy me-2"></i>æµ‹è¯•1: ä¸“ä¸šæ’åå­—æ®µ
                </h3>
                <p>éªŒè¯ä¸“ä¸šæ’åå­—æ®µæ˜¯å¦æ­£ç¡®æ·»åŠ åˆ°å­¦æœ¯èƒŒæ™¯éƒ¨åˆ†</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <label class="form-label">æ€» GPA/å‡åˆ† *</label>
                        <input type="text" class="form-control" value="3.8/4.0" readonly>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">ä¸“ä¸šæ’å <span class="text-muted">(é€‰å¡«)</span></label>
                        <input type="text" class="form-control" id="major_ranking_test" 
                               placeholder="å¦‚ï¼šTop 5% æˆ– 5/120">
                    </div>
                </div>
                
                <button class="btn btn-test" onclick="testMajorRanking()">æµ‹è¯•ä¸“ä¸šæ’åå­—æ®µ</button>
                <div id="test1-result"></div>
            </div>
            
            <!-- æµ‹è¯•2: æ ‡åŒ–æˆç»©å¤é€‰æ¡†äº¤äº’ -->
            <div class="test-section" id="test2">
                <h3 class="test-title">
                    <i class="fas fa-check-square me-2"></i>æµ‹è¯•2: æ ‡åŒ–æˆç»©å¤é€‰æ¡†äº¤äº’
                </h3>
                <p>éªŒè¯å¤é€‰æ¡†æ§åˆ¶è¾“å…¥æ¡†å¯ç”¨/ç¦ç”¨çŠ¶æ€çš„åŠŸèƒ½</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="has_language_score_test">
                            <label class="form-check-label" for="has_language_score_test">
                                TOEFL/IELTS æˆç»© <span class="text-muted">(é€‰å¡«)</span>
                            </label>
                        </div>
                        <input type="text" class="form-control" id="language_score_text_test" 
                               placeholder="å¦‚ï¼šTOEFL: 105 æˆ– IELTS: 7.0" disabled>
                    </div>
                    <div class="col-md-6">
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="has_gre_score_test">
                            <label class="form-check-label" for="has_gre_score_test">
                                GRE/GMAT æˆç»© <span class="text-muted">(é€‰å¡«)</span>
                            </label>
                        </div>
                        <input type="text" class="form-control" id="gre_score_text_test" 
                               placeholder="å¦‚ï¼šGRE: 325 æˆ– GMAT: 720" disabled>
                    </div>
                </div>
                
                <button class="btn btn-test" onclick="testStandardizedTests()">æµ‹è¯•æ ‡åŒ–æˆç»©äº¤äº’</button>
                <div id="test2-result"></div>
            </div>
            
            <!-- æµ‹è¯•3: é€‰æ ¡åå¥½æ’åºé€»è¾‘ -->
            <div class="test-section" id="test3">
                <h3 class="test-title">
                    <i class="fas fa-sort me-2"></i>æµ‹è¯•3: é€‰æ ¡åå¥½æ’åºé€»è¾‘
                </h3>
                <p>éªŒè¯æ€»å¼€å…³æ§åˆ¶æ‹–æ‹½æ’åºåŠŸèƒ½</p>
                
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="enable_selection_factors_test">
                    <label class="form-check-label" for="enable_selection_factors_test">
                        é€‰æ ¡æœ€çœ‹é‡æ–¹é¢ <span class="text-muted">(å‹¾é€‰åå¯æ‹–æ‹½æ’åº)</span>
                    </label>
                </div>
                <div id="selection-factors-container-test" class="disabled-sorting">
                    <div class="sortable-item" data-factor="ç»¼åˆæ’å">
                        <span><i class="fas fa-grip-vertical drag-handle"></i>ç»¼åˆæ’å</span>
                    </div>
                    <div class="sortable-item" data-factor="ä¸“ä¸šæ’å">
                        <span><i class="fas fa-grip-vertical drag-handle"></i>ä¸“ä¸šæ’å</span>
                    </div>
                    <div class="sortable-item" data-factor="åœ°ç†ä½ç½®ä¸å°±ä¸š">
                        <span><i class="fas fa-grip-vertical drag-handle"></i>åœ°ç†ä½ç½®ä¸å°±ä¸š</span>
                    </div>
                </div>
                
                <button class="btn btn-test" onclick="testSelectionFactors()">æµ‹è¯•é€‰æ ¡åå¥½æ’åº</button>
                <div id="test3-result"></div>
            </div>
            
            <!-- æµ‹è¯•4: ç•™å­¦é¢„ç®—å­—æ®µ -->
            <div class="test-section" id="test4">
                <h3 class="test-title">
                    <i class="fas fa-dollar-sign me-2"></i>æµ‹è¯•4: ç•™å­¦é¢„ç®—å­—æ®µ
                </h3>
                <p>éªŒè¯é¢„ç®—ä¸‹æ‹‰é€‰æ‹©æ¡†æ˜¯å¦æ­£ç¡®æ·»åŠ </p>
                
                <div class="row">
                    <div class="col-md-4">
                        <label class="form-label">æ„å‘å›½å®¶/åœ°åŒº *</label>
                        <input type="text" class="form-control" value="ç¾å›½, è‹±å›½" readonly>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">æ¯•ä¸šåå»å‘ <span class="text-muted">(é€‰å¡«)</span></label>
                        <select class="form-select">
                            <option value="">è¯·é€‰æ‹©</option>
                            <option value="ç«‹å³å›å›½">ç«‹å³å›å›½</option>
                            <option value="å…ˆåœ¨å½“åœ°å·¥ä½œ">å…ˆåœ¨å½“åœ°å·¥ä½œ</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">ç•™å­¦æ€»é¢„ç®— <span class="text-muted">(é€‰å¡«)</span></label>
                        <select class="form-select" id="budget_test">
                            <option value="">è¯·é€‰æ‹©</option>
                            <option value="20ä¸‡äººæ°‘å¸ä»¥å†…">20ä¸‡äººæ°‘å¸ä»¥å†…</option>
                            <option value="20-30ä¸‡äººæ°‘å¸">20-30ä¸‡äººæ°‘å¸</option>
                            <option value="30-50ä¸‡äººæ°‘å¸">30-50ä¸‡äººæ°‘å¸</option>
                            <option value="50-70ä¸‡äººæ°‘å¸">50-70ä¸‡äººæ°‘å¸</option>
                            <option value="70ä¸‡äººæ°‘å¸ä»¥ä¸Š">70ä¸‡äººæ°‘å¸ä»¥ä¸Š</option>
                            <option value="é¢„ç®—å……è¶³">é¢„ç®—å……è¶³</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn btn-test" onclick="testBudgetField()">æµ‹è¯•é¢„ç®—å­—æ®µ</button>
                <div id="test4-result"></div>
            </div>
            
            <!-- æµ‹è¯•5: æ•°æ®æ”¶é›†åŠŸèƒ½ -->
            <div class="test-section" id="test5">
                <h3 class="test-title">
                    <i class="fas fa-database me-2"></i>æµ‹è¯•5: æ•°æ®æ”¶é›†åŠŸèƒ½
                </h3>
                <p>éªŒè¯æ–°å¢å­—æ®µçš„æ•°æ®æ”¶é›†æ˜¯å¦æ­£å¸¸</p>
                
                <button class="btn btn-test" onclick="testDataCollection()">æµ‹è¯•æ•°æ®æ”¶é›†</button>
                <div id="test5-result"></div>
                <pre id="collected-data" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-top: 1rem; display: none;"></pre>
            </div>
            
            <!-- æ€»ä½“æµ‹è¯•ç»“æœ -->
            <div class="test-section" id="summary">
                <h3 class="test-title">
                    <i class="fas fa-chart-bar me-2"></i>æµ‹è¯•ç»“æœæ±‡æ€»
                </h3>
                <div id="summary-content">
                    <p class="text-muted">è¯·è¿è¡Œä¸Šè¿°å„é¡¹æµ‹è¯•ä»¥æŸ¥çœ‹ç»“æœæ±‡æ€»</p>
                </div>
                <button class="btn btn-test" onclick="runAllTests()">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // æµ‹è¯•ç»“æœå­˜å‚¨
        let testResults = {};
        
        // åˆå§‹åŒ–æ ‡åŒ–æˆç»©å¤é€‰æ¡†é€»è¾‘
        document.addEventListener('DOMContentLoaded', function() {
            initializeStandardizedTestsForTest();
            initializeSelectionFactorsForTest();
        });
        
        function initializeStandardizedTestsForTest() {
            // è¯­è¨€æˆç»©å¤é€‰æ¡†
            const languageCheckbox = document.getElementById('has_language_score_test');
            const languageInput = document.getElementById('language_score_text_test');
            
            languageCheckbox.addEventListener('change', function() {
                languageInput.disabled = !this.checked;
                if (!this.checked) {
                    languageInput.value = '';
                }
            });
            
            // GRE/GMATæˆç»©å¤é€‰æ¡†
            const greCheckbox = document.getElementById('has_gre_score_test');
            const greInput = document.getElementById('gre_score_text_test');
            
            greCheckbox.addEventListener('change', function() {
                greInput.disabled = !this.checked;
                if (!this.checked) {
                    greInput.value = '';
                }
            });
        }
        
        function initializeSelectionFactorsForTest() {
            const enableCheckbox = document.getElementById('enable_selection_factors_test');
            const container = document.getElementById('selection-factors-container-test');
            
            enableCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    container.classList.remove('disabled-sorting');
                } else {
                    container.classList.add('disabled-sorting');
                }
            });
        }
        
        function testMajorRanking() {
            const input = document.getElementById('major_ranking_test');
            const resultDiv = document.getElementById('test1-result');
            
            let passed = 0;
            let total = 3;
            let results = [];
            
            // æµ‹è¯•1: å­—æ®µå­˜åœ¨æ€§
            if (input) {
                results.push('<div class="test-result pass">âœ… ä¸“ä¸šæ’åå­—æ®µå­˜åœ¨</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ ä¸“ä¸šæ’åå­—æ®µä¸å­˜åœ¨</div>');
            }
            
            // æµ‹è¯•2: å ä½ç¬¦æ–‡æœ¬
            if (input && input.placeholder.includes('Top 5%')) {
                results.push('<div class="test-result pass">âœ… å ä½ç¬¦æ–‡æœ¬æ­£ç¡®</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ å ä½ç¬¦æ–‡æœ¬ä¸æ­£ç¡®</div>');
            }
            
            // æµ‹è¯•3: è¾“å…¥åŠŸèƒ½
            if (input) {
                input.value = 'Top 10%';
                if (input.value === 'Top 10%') {
                    results.push('<div class="test-result pass">âœ… è¾“å…¥åŠŸèƒ½æ­£å¸¸</div>');
                    passed++;
                } else {
                    results.push('<div class="test-result fail">âŒ è¾“å…¥åŠŸèƒ½å¼‚å¸¸</div>');
                }
            }
            
            testResults.majorRanking = passed === total;
            resultDiv.innerHTML = results.join('') + `<p><strong>æµ‹è¯•ç»“æœ: ${passed}/${total} é€šè¿‡</strong></p>`;
            updateTestSection('test1', passed === total);
            updateSummary();
        }
        
        function testStandardizedTests() {
            const resultDiv = document.getElementById('test2-result');
            const languageCheckbox = document.getElementById('has_language_score_test');
            const languageInput = document.getElementById('language_score_text_test');
            const greCheckbox = document.getElementById('has_gre_score_test');
            const greInput = document.getElementById('gre_score_text_test');
            
            let passed = 0;
            let total = 6;
            let results = [];
            
            // æµ‹è¯•è¯­è¨€æˆç»©å¤é€‰æ¡†
            if (languageInput.disabled) {
                results.push('<div class="test-result pass">âœ… è¯­è¨€æˆç»©è¾“å…¥æ¡†åˆå§‹çŠ¶æ€ä¸ºç¦ç”¨</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ è¯­è¨€æˆç»©è¾“å…¥æ¡†åˆå§‹çŠ¶æ€åº”ä¸ºç¦ç”¨</div>');
            }
            
            // å¯ç”¨è¯­è¨€æˆç»©
            languageCheckbox.checked = true;
            languageCheckbox.dispatchEvent(new Event('change'));
            if (!languageInput.disabled) {
                results.push('<div class="test-result pass">âœ… å‹¾é€‰åè¯­è¨€æˆç»©è¾“å…¥æ¡†å¯ç”¨</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ å‹¾é€‰åè¯­è¨€æˆç»©è¾“å…¥æ¡†æœªå¯ç”¨</div>');
            }
            
            // å–æ¶ˆå‹¾é€‰è¯­è¨€æˆç»©
            languageCheckbox.checked = false;
            languageCheckbox.dispatchEvent(new Event('change'));
            if (languageInput.disabled) {
                results.push('<div class="test-result pass">âœ… å–æ¶ˆå‹¾é€‰åè¯­è¨€æˆç»©è¾“å…¥æ¡†ç¦ç”¨</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ å–æ¶ˆå‹¾é€‰åè¯­è¨€æˆç»©è¾“å…¥æ¡†æœªç¦ç”¨</div>');
            }
            
            // æµ‹è¯•GREæˆç»©å¤é€‰æ¡†
            if (greInput.disabled) {
                results.push('<div class="test-result pass">âœ… GREæˆç»©è¾“å…¥æ¡†åˆå§‹çŠ¶æ€ä¸ºç¦ç”¨</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ GREæˆç»©è¾“å…¥æ¡†åˆå§‹çŠ¶æ€åº”ä¸ºç¦ç”¨</div>');
            }
            
            // å¯ç”¨GREæˆç»©
            greCheckbox.checked = true;
            greCheckbox.dispatchEvent(new Event('change'));
            if (!greInput.disabled) {
                results.push('<div class="test-result pass">âœ… å‹¾é€‰åGREæˆç»©è¾“å…¥æ¡†å¯ç”¨</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ å‹¾é€‰åGREæˆç»©è¾“å…¥æ¡†æœªå¯ç”¨</div>');
            }
            
            // å–æ¶ˆå‹¾é€‰GREæˆç»©
            greCheckbox.checked = false;
            greCheckbox.dispatchEvent(new Event('change'));
            if (greInput.disabled) {
                results.push('<div class="test-result pass">âœ… å–æ¶ˆå‹¾é€‰åGREæˆç»©è¾“å…¥æ¡†ç¦ç”¨</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ å–æ¶ˆå‹¾é€‰åGREæˆç»©è¾“å…¥æ¡†æœªç¦ç”¨</div>');
            }
            
            testResults.standardizedTests = passed === total;
            resultDiv.innerHTML = results.join('') + `<p><strong>æµ‹è¯•ç»“æœ: ${passed}/${total} é€šè¿‡</strong></p>`;
            updateTestSection('test2', passed === total);
            updateSummary();
        }
        
        function testSelectionFactors() {
            const resultDiv = document.getElementById('test3-result');
            const enableCheckbox = document.getElementById('enable_selection_factors_test');
            const container = document.getElementById('selection-factors-container-test');
            
            let passed = 0;
            let total = 4;
            let results = [];
            
            // æµ‹è¯•åˆå§‹çŠ¶æ€
            if (container.classList.contains('disabled-sorting')) {
                results.push('<div class="test-result pass">âœ… åˆå§‹çŠ¶æ€ä¸ºç¦ç”¨æ’åº</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ åˆå§‹çŠ¶æ€åº”ä¸ºç¦ç”¨æ’åº</div>');
            }
            
            // æµ‹è¯•å¯ç”¨æ’åº
            enableCheckbox.checked = true;
            enableCheckbox.dispatchEvent(new Event('change'));
            if (!container.classList.contains('disabled-sorting')) {
                results.push('<div class="test-result pass">âœ… å‹¾é€‰åå¯ç”¨æ’åº</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ å‹¾é€‰åæœªå¯ç”¨æ’åº</div>');
            }
            
            // æµ‹è¯•ç¦ç”¨æ’åº
            enableCheckbox.checked = false;
            enableCheckbox.dispatchEvent(new Event('change'));
            if (container.classList.contains('disabled-sorting')) {
                results.push('<div class="test-result pass">âœ… å–æ¶ˆå‹¾é€‰åç¦ç”¨æ’åº</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ å–æ¶ˆå‹¾é€‰åæœªç¦ç”¨æ’åº</div>');
            }
            
            // æµ‹è¯•æ’åºé¡¹å­˜åœ¨
            const sortableItems = container.querySelectorAll('.sortable-item');
            if (sortableItems.length >= 3) {
                results.push('<div class="test-result pass">âœ… æ’åºé¡¹å­˜åœ¨ä¸”æ•°é‡æ­£ç¡®</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ æ’åºé¡¹æ•°é‡ä¸æ­£ç¡®</div>');
            }
            
            testResults.selectionFactors = passed === total;
            resultDiv.innerHTML = results.join('') + `<p><strong>æµ‹è¯•ç»“æœ: ${passed}/${total} é€šè¿‡</strong></p>`;
            updateTestSection('test3', passed === total);
            updateSummary();
        }
        
        function testBudgetField() {
            const resultDiv = document.getElementById('test4-result');
            const budgetSelect = document.getElementById('budget_test');
            
            let passed = 0;
            let total = 3;
            let results = [];
            
            // æµ‹è¯•å­—æ®µå­˜åœ¨æ€§
            if (budgetSelect) {
                results.push('<div class="test-result pass">âœ… é¢„ç®—å­—æ®µå­˜åœ¨</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ é¢„ç®—å­—æ®µä¸å­˜åœ¨</div>');
            }
            
            // æµ‹è¯•é€‰é¡¹æ•°é‡
            const options = budgetSelect.querySelectorAll('option');
            if (options.length === 7) { // åŒ…æ‹¬é»˜è®¤é€‰é¡¹
                results.push('<div class="test-result pass">âœ… é¢„ç®—é€‰é¡¹æ•°é‡æ­£ç¡® (7ä¸ª)</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ é¢„ç®—é€‰é¡¹æ•°é‡ä¸æ­£ç¡® (æœŸæœ›7ä¸ªï¼Œå®é™…' + options.length + 'ä¸ª)</div>');
            }
            
            // æµ‹è¯•é€‰æ‹©åŠŸèƒ½
            budgetSelect.value = '50-70ä¸‡äººæ°‘å¸';
            if (budgetSelect.value === '50-70ä¸‡äººæ°‘å¸') {
                results.push('<div class="test-result pass">âœ… é¢„ç®—é€‰æ‹©åŠŸèƒ½æ­£å¸¸</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ é¢„ç®—é€‰æ‹©åŠŸèƒ½å¼‚å¸¸</div>');
            }
            
            testResults.budgetField = passed === total;
            resultDiv.innerHTML = results.join('') + `<p><strong>æµ‹è¯•ç»“æœ: ${passed}/${total} é€šè¿‡</strong></p>`;
            updateTestSection('test4', passed === total);
            updateSummary();
        }
        
        function testDataCollection() {
            const resultDiv = document.getElementById('test5-result');
            const dataDiv = document.getElementById('collected-data');
            
            // è®¾ç½®æµ‹è¯•æ•°æ®
            document.getElementById('major_ranking_test').value = 'Top 5%';
            document.getElementById('budget_test').value = '50-70ä¸‡äººæ°‘å¸';
            document.getElementById('has_language_score_test').checked = true;
            document.getElementById('language_score_text_test').disabled = false;
            document.getElementById('language_score_text_test').value = 'TOEFL: 105';
            document.getElementById('enable_selection_factors_test').checked = true;
            
            // æ¨¡æ‹Ÿæ•°æ®æ”¶é›†
            const collectedData = {
                major_ranking: document.getElementById('major_ranking_test').value || null,
                budget: document.getElementById('budget_test').value || null,
                has_language_score: document.getElementById('has_language_score_test').checked,
                language_score_text: document.getElementById('language_score_text_test').value || null,
                enable_selection_factors: document.getElementById('enable_selection_factors_test').checked
            };
            
            let passed = 0;
            let total = 3;
            let results = [];
            
            // æµ‹è¯•ä¸“ä¸šæ’åæ”¶é›†
            if (collectedData.major_ranking === 'Top 5%') {
                results.push('<div class="test-result pass">âœ… ä¸“ä¸šæ’åæ•°æ®æ”¶é›†æ­£ç¡®</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ ä¸“ä¸šæ’åæ•°æ®æ”¶é›†å¤±è´¥</div>');
            }
            
            // æµ‹è¯•é¢„ç®—æ”¶é›†
            if (collectedData.budget === '50-70ä¸‡äººæ°‘å¸') {
                results.push('<div class="test-result pass">âœ… é¢„ç®—æ•°æ®æ”¶é›†æ­£ç¡®</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ é¢„ç®—æ•°æ®æ”¶é›†å¤±è´¥</div>');
            }
            
            // æµ‹è¯•å¤é€‰æ¡†çŠ¶æ€æ”¶é›†
            if (collectedData.has_language_score === true && collectedData.enable_selection_factors === true) {
                results.push('<div class="test-result pass">âœ… å¤é€‰æ¡†çŠ¶æ€æ”¶é›†æ­£ç¡®</div>');
                passed++;
            } else {
                results.push('<div class="test-result fail">âŒ å¤é€‰æ¡†çŠ¶æ€æ”¶é›†å¤±è´¥</div>');
            }
            
            testResults.dataCollection = passed === total;
            resultDiv.innerHTML = results.join('') + `<p><strong>æµ‹è¯•ç»“æœ: ${passed}/${total} é€šè¿‡</strong></p>`;
            updateTestSection('test5', passed === total);
            
            // æ˜¾ç¤ºæ”¶é›†çš„æ•°æ®
            dataDiv.textContent = JSON.stringify(collectedData, null, 2);
            dataDiv.style.display = 'block';
            
            updateSummary();
        }
        
        function updateTestSection(sectionId, passed) {
            const section = document.getElementById(sectionId);
            section.classList.remove('success', 'warning', 'error');
            section.classList.add(passed ? 'success' : 'error');
        }
        
        function updateSummary() {
            const summaryDiv = document.getElementById('summary-content');
            const totalTests = Object.keys(testResults).length;
            const passedTests = Object.values(testResults).filter(result => result).length;
            
            if (totalTests === 0) {
                summaryDiv.innerHTML = '<p class="text-muted">è¯·è¿è¡Œä¸Šè¿°å„é¡¹æµ‹è¯•ä»¥æŸ¥çœ‹ç»“æœæ±‡æ€»</p>';
                return;
            }
            
            let summaryHtml = `<p><strong>æ€»ä½“æµ‹è¯•ç»“æœ: ${passedTests}/${totalTests} é¡¹é€šè¿‡</strong></p>`;
            
            for (const [testName, result] of Object.entries(testResults)) {
                const status = result ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥';
                const testDisplayName = {
                    majorRanking: 'ä¸“ä¸šæ’åå­—æ®µ',
                    standardizedTests: 'æ ‡åŒ–æˆç»©äº¤äº’',
                    selectionFactors: 'é€‰æ ¡åå¥½æ’åº',
                    budgetField: 'é¢„ç®—å­—æ®µ',
                    dataCollection: 'æ•°æ®æ”¶é›†'
                }[testName] || testName;
                
                summaryHtml += `<div class="test-result ${result ? 'pass' : 'fail'}">${testDisplayName}: ${status}</div>`;
            }
            
            if (passedTests === totalTests) {
                summaryHtml += '<div class="alert alert-success mt-3"><strong>ğŸ‰ æ‰€æœ‰ V1.6.1 å‰ç«¯åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼</strong></div>';
                updateTestSection('summary', true);
            } else {
                summaryHtml += '<div class="alert alert-warning mt-3"><strong>âš ï¸ éƒ¨åˆ†æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç›¸å…³åŠŸèƒ½</strong></div>';
                updateTestSection('summary', false);
            }
            
            summaryDiv.innerHTML = summaryHtml;
        }
        
        function runAllTests() {
            testMajorRanking();
            setTimeout(() => testStandardizedTests(), 100);
            setTimeout(() => testSelectionFactors(), 200);
            setTimeout(() => testBudgetField(), 300);
            setTimeout(() => testDataCollection(), 400);
        }
    </script>
</body>
</html>